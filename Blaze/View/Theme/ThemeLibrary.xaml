<UserControl x:Class="Blaze.View.Theme.ThemeLibrary"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:Blaze.View.Theme"
             xmlns:converter="clr-namespace:Blaze.Core"
             xmlns:UIElements="clr-namespace:Blaze.UIElements"
             mc:Ignorable="d" 
             d:DataContext="{d:DesignInstance Type=local:ThemeLibrary}"
             d:DesignHeight="450" d:DesignWidth="800">
    <UserControl.Resources>
        <ControlTemplate x:Key="NonScrollableListView"
                         TargetType="ListView">
            <ItemsPresenter />
        </ControlTemplate>
        <converter:BooleanInverter x:Key="BooleanInverter"/>
    </UserControl.Resources>
    <Border Background="{DynamicResource ApplicationSurfaceBrush}">
        <Grid Margin="10,0,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="5*" />
                <ColumnDefinition Width="400" x:Name="PreviewGridColumn" />
            </Grid.ColumnDefinitions>
            <ScrollViewer Margin="0, 50, 0, 50" Style="{StaticResource CustomScrollViewer}">

                <Grid Margin="50, 0, 0, 0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>

                    <DockPanel VerticalAlignment="Top"
                               Grid.Column="2">

                        <TextBlock Text="Themes"
                                   FontFamily="{DynamicResource ApplicationHeaderFont}"
                                   FontSize="{DynamicResource ApplicationHeaderFontSize}"
                                   Foreground="{DynamicResource ApplicationOnSurfaceBrush}" />
                        <UIElements:CustomButton Background="{DynamicResource ApplicationSecondaryBrush}"
                                                 Style="{DynamicResource NormalButton}"
                                                   FontFamily="{DynamicResource ApplicationButtonFont}"
                                                   FontSize="{DynamicResource ApplicationButtonFontSize}"
                                                   Foreground="{DynamicResource ApplicationOnSecondaryBrush}"
                                                   HorizontalAlignment="Right"
                                                 VerticalAlignment="Center"
                                                 IsEnabled="{Binding IsRenameOpen, ElementName=AvailableThemes, Converter={StaticResource BooleanInverter}}"
                                                 Command="{Binding MakeNewTheme}"
                                                   Content="New Theme">
                        </UIElements:CustomButton>
                    </DockPanel>
                    <Separator Margin="0,0,0,20" Grid.Row="1"/>

                    <!-- List View -->
                    <UIElements:ThemeListView x:Name="AvailableThemes"
                                              HorizontalAlignment="Stretch"
                                              VerticalAlignment="Stretch"
                                              ItemPadding="10"
                                              Grid.Row="2"
                                              ItemMargin="0,0,0,0"
                                              Background="{DynamicResource ApplicationSurfaceBrush}"/>

                </Grid>
            </ScrollViewer>
            <!-- Preview -->
            <local:ThemePreview Grid.Column="1"
                                VerticalContentAlignment="Top"
                                Margin="0,10,0,10"
                                x:Name="Preview"/>
        </Grid>
    </Border>
</UserControl>
